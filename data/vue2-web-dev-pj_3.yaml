- en: Project 2 - Castle Duel Browser Game
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 项目2 - 城堡决斗浏览器游戏
- en: In this chapter, we will create an entirely different app--a browser game. It
    will consist of two players, each commanding an impressive castle and trying to
    destroy the other one by bringing either the opponent's food or damage levels
    to zero with the help of action cards.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将创建一个完全不同的应用程序--一个浏览器游戏。它将由两名玩家组成，每个玩家指挥一座令人印象深刻的城堡，并试图通过行动卡将对手的食物或伤害水平降低到零来摧毁对方。
- en: In this project and in the following ones, we will split our app into reusable
    components. This is the heart of the framework, and all its API is built around
    this idea. We will see how to define and use components and how to make them communicate
    with each other. The result will be a better structure for our app.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个项目和接下来的项目中，我们将把我们的应用程序分成可重用的组件。这是框架的核心，其所有API都是围绕这个想法构建的。我们将看到如何定义和使用组件，以及如何使它们相互通信。结果将是我们应用程序的更好结构。
- en: Rules of the game
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 游戏规则
- en: 'Here are the rules we will implement in the game:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们将在游戏中实施的规则：
- en: Two players play turn by turn
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两名玩家轮流进行游戏
- en: Each player starts the game with 10 health, 10 food, and a 5-card hand
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个玩家游戏开始时拥有10点健康值，10点食物和5张手牌
- en: The players can't have more than 10 health and 10 food
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 玩家的健康和食物值不能超过10点。
- en: A player loses when their food or health reaches zero
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当玩家的食物或健康值达到零时，玩家将失败。
- en: Both the players can lose in a draw
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两名玩家都可以在平局中失败。
- en: During one player's turn, each player's only possible action is to play a card,
    which is then put in the discard pile
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在一个玩家的回合中，每个玩家唯一可能的行动是打出一张卡牌，然后将其放入弃牌堆
- en: Each player draws a card from the draw pile at the beginning of the turn (except
    for their first turn)
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个玩家在回合开始时从抽牌堆中抽一张牌（除了他们的第一回合）
- en: Thanks to the two preceding rules, each player has exactly five cards in their
    hand when they start their turn
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于前两条规则，每个玩家在开始他们的回合时手中正好有五张牌
- en: If the draw pile is empty when the player draws a card, the draw pile is refilled
    with the discard pile
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果玩家抽牌时抽牌堆为空，则将弃牌堆重新填满抽牌堆
- en: Cards can modify the health and food of the player or their opponent
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 卡片可以修改玩家或对手的健康和食物值
- en: Some cards can also make a player skip their turn
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有些卡片还可以让玩家跳过他们的回合。
- en: The gameplay is built around the facts that players must play one and only one
    card each turn and that most of the cards will have a negative effect on them
    (the most common one being losing food). You have to think of your strategy before
    playing.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 游戏玩法建立在玩家每回合只能打出一张卡牌，并且大多数卡牌会对他们产生负面影响（最常见的是失去食物）。你必须在出牌前考虑好你的策略。
- en: The app will consists of two layers--the world, where game objects (such as
    the scenery and the castles) are drawn, and the user interface.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序将由两层组成--世界，游戏对象（如风景和城堡）在其中绘制，以及用户界面。
- en: 'The world will have two castles facing each other, a ground, and a sky, with
    multiple animated clouds; each castle will feature two banners--the green one
    being the player food, and the red one being the player health--with a little
    bubble displaying the amount of food or health remaining:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 世界将有两座城堡彼此对峙，一个地面和一个天空，有多个动画云；每座城堡将有两面旗帜--绿色的代表玩家的食物，红色的代表玩家的健康--并显示剩余食物或健康值的气泡：
- en: '![](assets/66e1a50b-ee36-4040-998f-f14783618466.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/66e1a50b-ee36-4040-998f-f14783618466.png)'
- en: For the UI, there will be a bar at the top, with a turn counter and the names
    of the two players. At the bottom of the screen, the hand will display the cards
    of the current player.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: UI界面顶部将有一个条形菜单，显示回合计数器和两名玩家的姓名。屏幕底部，手牌将显示当前玩家的卡牌。
- en: '![](assets/c23e599c-d371-4475-9db2-e39f306bedab.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/c23e599c-d371-4475-9db2-e39f306bedab.png)'
- en: 'In addition to these, a few overlays will be periodically shown, hiding the
    hand. One will show the name of the player going next:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 除此之外，还会定期显示一些叠加层，隐藏手牌。其中一个将显示接下来轮到的玩家的名字：
- en: '![](assets/f8d92822-cde6-4725-ae5b-9b2889da3c15.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: ！[](assets/f8d92822-cde6-4725-ae5b-9b2889da3c15.png)
- en: It will be followed by another overlay displaying the card that was played last
    turn by the opponent. This will allow the game to be played on the same screen
    (for example, a tablet).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来将是另一个叠加层，显示对手上一轮打出的牌。这将允许游戏在同一屏幕上进行（例如，平板电脑）。
- en: '![](assets/0f3ed8f3-ae57-404b-863a-bd3f274f1e13.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: ！[](assets/0f3ed8f3-ae57-404b-863a-bd3f274f1e13.png）
- en: The third overlay will be only shown when the game is over, displaying whether
    the players have won or lost. Clicking on this overlay will reload the page, allowing
    the players to start a new game.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 第三个叠加层只有在游戏结束时才会显示，显示玩家是赢了还是输了。单击此叠加层将重新加载页面，允许玩家开始新游戏。
- en: '![](assets/1744d0e2-78e2-44a2-8ad8-2a6ab7656f5c.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: ！[](assets/1744d0e2-78e2-44a2-8ad8-2a6ab7656f5c.png)
- en: Setting up the project
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置项目
- en: 'Download the `chapter 2` files and extract the project setup into an empty
    folder. You should have the following content:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 下载`第2章`文件并将项目设置提取到一个空文件夹中。您应该有以下内容：
- en: '`index.html`: The web page'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`index.html`：网页'
- en: '`style.css`: The CSS file'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`style.css`：CSS文件'
- en: '`svg`: Contains all the SVG images of the game'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`svg`：包含游戏的所有SVG图像'
- en: '`cards.js`: With all the cards data ready to use'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cards.js`：所有卡片数据都已准备好使用'
- en: '`state.js`: Where we will consolidate the main data properties of the game'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`state.js`：我们将在这里整合游戏的主要数据属性'
- en: '`utils.js`: Where we will write useful functions'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`utils.js`：我们将编写有用的函数的地方'
- en: '`banner-template.svg`: We will use the content of this file later'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`banner-template.svg`：我们稍后将使用此文件的内容'
- en: We will start with our main JavaScript file--create a new file called `main.js`.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从我们的主JavaScript文件开始--创建一个名为`main.js`的新文件。
- en: 'Open the `index.html` file and add a new script tag referencing the new file,
    just after the `state.js` one:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 打开`index.html`文件，并在`state.js`之后添加一个引用新文件的新脚本标记：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Let''s create the main instance of our app in the `main.js` file:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在`main.js`文件中创建我们应用程序的主要实例：
- en: '[PRE1]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: We are now ready to go!
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经准备好了！
- en: The calm before the storm
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 风平浪静
- en: In this section, we will introduce a few new Vue features that will help us
    build the game, such as components, props, and event emitting!
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将介绍一些新的Vue功能，这些功能将帮助我们构建游戏，比如组件、props和事件发射！
- en: The template option
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模板选项
- en: 'If you look in the `index.html` file, you will see that the `#app` element
    is already there and empty. In fact, we won''t write anything inside. Instead,
    we will use the template option directly on the definition object. Let''s try
    it with a dumb template:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您查看`index.html`文件，您会看到`＃app`元素已经存在且为空。实际上，我们不会在里面写任何东西。相反，我们将直接在定义对象上使用模板选项。让我们尝试一个愚蠢的模板：
- en: '[PRE2]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Here, we used the new JavaScript strings, with the [PRE3]
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们使用了新的JavaScript字符串，带有[PRE3]
- en: new Vue({
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: new Vue（{
- en: // …
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: // …
- en: 'data: state,'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 数据：状态，
- en: '})'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '}）'
- en: '[PRE4]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: new Vue({
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: new Vue（{
- en: 'name: ''game'','
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 名字：'游戏'，
- en: 'el: ''#app'','
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: el：'#app'，
- en: 'data: state,'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 数据：状态，
- en: 'template: `<div id="#app">'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div id =“＃app”>
- en: '{{ worldRatio }}'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '{{worldRatio}}'
- en: </div>`,
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '})'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '}）'
- en: // Window resize handling
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: //窗口调整大小处理
- en: window.addEventListener('resize', () => {
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: window.addEventListener('resize'，（）=> {
- en: state.worldRatio = getWorldRatio()
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: state.worldRatio = getWorldRatio()
- en: '})'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '}）'
- en: '[PRE5]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: new Vue({
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: new Vue（{
- en: // ...
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: mounted () {
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: mounted（）{
- en: console.log(this.$data === state)
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: console.log（this.$data === state）
- en: '},'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '})'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '}）'
- en: '[PRE6]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: this.worldRatio = 42
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: this.worldRatio = 42
- en: '[PRE7]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: this.$data.worldRatio = 42
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: this.$data.worldRatio = 42
- en: '[PRE8]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: state.worldRatio = 42
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: state.worldRatio = 42
- en: '[PRE9]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: // The consolidated state of our app
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: //我们应用程序的整合状态
- en: var state = {
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: var state = {
- en: // World
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: //世界
- en: 'worldRatio: getWorldRatio(),'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: worldRatio：getWorldRatio（），
- en: // Game
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: //游戏
- en: 'turn: 1,'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 回合：1，
- en: 'players: ['
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 玩家：[
- en: '{'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '{'
- en: 'name: ''Anne of Cleves'','
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 名字：'克利夫斯的安妮'，
- en: '},'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '{'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '{'
- en: 'name: ''William the Bald'','
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 名字：'光头的威廉'，
- en: '},'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '],'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: ']，'
- en: 'currentPlayerIndex: Math.round(Math.random()),'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 'currentPlayerIndex: Math.round(Math.random()),'
- en: '}'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE10]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: <!-- Scripts -->
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- Scripts -->
- en: <script src="utils.js"></script>
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="utils.js"></script>
- en: <script src="cards.js"></script>
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="cards.js"></script>
- en: <script src="state.js"></script>
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="state.js"></script>
- en: <script src="components/ui.js"></script>
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="components/ui.js"></script>
- en: <script src="main.js"></script>
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="main.js"></script>
- en: '[PRE11]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Vue.component('top-bar', {
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('top-bar', {
- en: 'template: `<div class="top-bar">'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="top-bar">'
- en: Top bar
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: Top bar
- en: </div>`,
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '})'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE12]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: new Vue({
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: new Vue({
- en: // ...
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: 'template: `<div id="#app">'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div id="#app">'
- en: <top-bar/>
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: <top-bar/>
- en: </div>`,
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '})'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE13]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Vue.component('top-bar', {
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('top-bar', {
- en: // ...
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: 'props: [''players'', ''currentPlayerIndex'', ''turn''],'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''players'', ''currentPlayerIndex'', ''turn''],'
- en: '})'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE14]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: <top-bar :turn="turn" :current-player-index="currentPlayerIndex"
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: <top-bar :turn="turn" :current-player-index="currentPlayerIndex"
- en: :players="players" />
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: :players="players" />
- en: '[PRE15]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Vue.component('top-bar', {
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('top-bar', {
- en: // ...
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: created () {
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: created () {
- en: console.log(this.players)
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: console.log(this.players)
- en: '},'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '})'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE16]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'template: `<div class="top-bar">'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="top-bar">'
- en: <div class="player p0">{{ players[0].name }}</div>
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="player p0">{{ players[0].name }}</div>
- en: <div class="player p1">{{ players[1].name }}</div>
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="player p1">{{ players[1].name }}</div>
- en: </div>`,
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE17]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'template: `<div class="top-bar">'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="top-bar">'
- en: <div class="player p0">{{ players[0].name }}</div>
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="player p0">{{ players[0].name }}</div>
- en: <div class="turn-counter">
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="turn-counter">
- en: <div class="turn">Turn {{ turn }}</div>
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="turn">Turn {{ turn }}</div>
- en: </div>
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: <div class="player p1">{{ players[1].name }}</div>
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="player p1">{{ players[1].name }}</div>
- en: </div>`,
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE18]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'template: `<div class="top-bar" :class="''player-'' +'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="top-bar" :class="''player-'' +'
- en: currentPlayerIndex">
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: currentPlayerIndex">
- en: <div class="player p0">{{ players[0].name }}</div>
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="player p0">{{ players[0].name }}</div>
- en: <div class="turn-counter">
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="turn-counter">
- en: <img class="arrow" src="svg/turn.svg" />
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="arrow" src="svg/turn.svg" />
- en: <div class="turn">Turn {{ turn }}</div>
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="turn">Turn {{ turn }}</div>
- en: </div>
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: <div class="player p1">{{ players[1].name }}</div>
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="player p1">{{ players[1].name }}</div>
- en: </div>`,
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE19]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: state.currentPlayerIndex = 1
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayerIndex = 1
- en: state.currentPlayerIndex = 0
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayerIndex = 0
- en: '[PRE20]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Vue.component('card', {
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('card', {
- en: // Definition here
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: // Definition here
- en: '})'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE21]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Vue.component('card', {
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('card', {
- en: 'props: [''def''],'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''def''],'
- en: '})'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE22]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Vue.component('card', {
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('card', {
- en: 'template: `<div class="card">'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="card">'
- en: </div>`,
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''def''],'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''def''],'
- en: '})'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE23]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: <div class="card" :class="'type-' + def.type">
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="card" :class="'type-' + def.type">
- en: '[PRE24]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: <div class="card" :class="'type-' + def.type">
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="card" :class="'type-' + def.type">
- en: <div class="title">{{ def.title }}</div>
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="title">{{ def.title }}</div>
- en: </div>
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: '[PRE25]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: <div class="title">{{ def.title }}</div>
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="title">{{ def.title }}</div>
- en: <img class="separator" src="svg/card-separator.svg" />
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="separator" src="svg/card-separator.svg" />
- en: '[PRE26]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: <div class="description"><div v-html="def.description"></div>
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="description"><div v-html="def.description"></div>
- en: </div>
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: '[PRE27]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: <div class="note" v-if="def.note"><div v-html="def.note"></div>
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="note" v-if="def.note"><div v-html="def.note"></div>
- en: </div>
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: '[PRE28]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Vue.component('card', {
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('card', {
- en: 'props: [''def''],'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''def''],'
- en: 'template: `<div class="card" :class="''type-'' + def.type">'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="card" :class="''type-'' + def.type">'
- en: <div class="title">{{ def.title }}</div>
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="title">{{ def.title }}</div>
- en: <img class="separator" src="svg/card-separator.svg" />
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="separator" src="svg/card-separator.svg" />
- en: <div class="description"><div v-html="def.description"></div></div>
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="description"><div v-html="def.description"></div></div>
- en: <div class="note" v-if="def.note"><div v-html="def.note"></div></div>
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="note" v-if="def.note"><div v-html="def.note"></div></div>
- en: </div>`,
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '})'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE29]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'template: `<div id="#app">'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div id="#app">'
- en: <top-bar :turn="turn" :current-player-
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: <top-bar :turn="turn" :current-player-
- en: index="currentPlayerIndex" :players="players" />
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: index="currentPlayerIndex" :players="players" />
- en: <card :def="testCard" />
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: <card :def="testCard" />
- en: </div>`,
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE30]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'computed: {'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 'computed: {'
- en: testCard () {
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: testCard () {
- en: return cards.archers
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: return cards.archers
- en: '},'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE31]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: <card :def="testCard" @click="handlePlay" />
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: <card :def="testCard" @click="handlePlay" />
- en: '[PRE32]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'methods: {'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: handlePlay () {
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: handlePlay（）{
- en: console.log('You played a card!')
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: console.log（'你打出了一张牌！'）
- en: '}'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE33]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: <card :def="testCard" @click.native="handlePlay" />
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: <card：def="testCard" @click.native="handlePlay" />
- en: '[PRE34]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: this.$emit('play')
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: this.$emit（'play'）
- en: '[PRE35]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: this.$on('play', () => {
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: this.$on（'play'，（）=> {
- en: console.log('Caught a play event!')
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: console.log（'捕获了一个播放事件！'）
- en: '})'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE36]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: <card v-on:play="handlePlay" />
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: <card v-on：play="handlePlay" />
- en: '[PRE37]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: <card @play="handlePlay" />
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: <card @play="handlePlay" />
- en: '[PRE38]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: this.$emit('play', 'orange', 42)
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: this.$emit（'play'，'orange'，42）
- en: '[PRE39]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: handlePlay (color, number) {
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: handlePlay（颜色，数字）{
- en: console.log('handle play event', 'color=', color, 'number=', number)
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: console.log（'处理播放事件'，'颜色=',颜色，'数字=',数字）
- en: '}'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE40]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'methods: {'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: play () {
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 播放（）{
- en: this.$emit('play')
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: this.$emit（'play'）
- en: '},'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '},'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '[PRE41]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: <div class="card" :class="'type-' + def.type" @click="play">
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: <div class ="card"：class="'type-' + def.type" @click ="play">
- en: '[PRE42]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: <card :def="testCard" @play="handlePlay" />
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: <card：def="testCard" @play="handlePlay" />
- en: '[PRE43]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Vue.component('hand', {
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component（'hand'，{
- en: 'template: `<div class="hand">'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class ="hand">
- en: <div class="wrapper">
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: <div class ="wrapper">
- en: <!-- Cards -->
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: <!--卡片-->
- en: </div>
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: </ div>
- en: </div>`,
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: </ div> `,
- en: '})'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE44]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: Vue.component('hand', {
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component（'hand'，{
- en: // ...
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: 'props: [''cards''],'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 道具：['卡片']，
- en: '})'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE45]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: <div class="wrapper">
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: <div class ="wrapper">
- en: <card v-for="card of cards" :def="card.def" />
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: <card v-for="card of cards"：def="card.def" />
- en: </div>
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: </ div>
- en: '[PRE46]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: var state = {
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: var state = {
- en: // ...
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: 'testHand: [],'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: testHand：[]，
- en: '}'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE47]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'methods: {'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: createTestHand () {
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: createTestHand（）{
- en: const cards = []
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: const cards = []
- en: // Get the possible ids
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: //获取可能的ID
- en: const ids = Object.keys(cards)
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: const ids = Object.keys（cards）
- en: // Draw 5 cards
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: //抽5张牌
- en: for (let i = 0; i < 5; i++) {
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: for（let i = 0; i <5; i ++）{
- en: cards.push(testDrawCard())
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: cards.push（testDrawCard（））
- en: '}'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: return cards
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 返回卡
- en: '},'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '},'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '[PRE48]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'methods: {'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: // ...
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: testDrawCard () {
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: testDrawCard（）{
- en: // Choose a card at random with the ids
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: //使用ids随机选择一张卡
- en: const ids = Object.keys(cards)
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: const ids = Object.keys（cards）
- en: const randomId = ids[Math.floor(Math.random() * ids.length)]
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: const randomId = ids [Math.floor（Math.random（）* ids.length）]
- en: // Return a new card with this definition
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: //返回一个具有此定义的新卡
- en: return {
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 返回{
- en: // Unique id for the card
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: //卡的唯一ID
- en: 'uid: cardUid++,'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: uid：cardUid ++，
- en: // Id of the definition
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: // 定义的ID
- en: 'id: randomId,'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: id：randomId，
- en: // Definition object
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: //定义对象
- en: 'def: cards[randomId],'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: def：cards [randomId]，
- en: '}'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE49]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: created () {
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: created（）{
- en: this.testHand = this.createTestHand()
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: this.testHand = this.createTestHand（）
- en: '},'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '[PRE50]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'template: `<div id="#app">'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div id ="＃app">
- en: <top-bar :turn="turn" :current-player-
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: <top-bar：turn="turn"：current-player-
- en: index="currentPlayerIndex" :players="players" />
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: index ="currentPlayerIndex"：players="players" />
- en: <hand :cards="testHand" />
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: <hand：cards="testHand" />
- en: </div>`,
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: </ div> `,
- en: '[PRE51]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: // The consolidated state of our app
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: //我们应用程序的综合状态
- en: var state = {
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: var state = {
- en: // UI
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: // UI
- en: 'activeOverlay: null,'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: activeOverlay：null，
- en: // ...
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: '}'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE52]'
  id: totrans-314
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: <hand :cards="testHand" v-if="!activeOverlay" />
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: <hand：cards="testHand" v-if="！activeOverlay" />
- en: '[PRE53]'
  id: totrans-316
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: state.activeOverlay = 'player-turn'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay ='player-turn'
- en: '[PRE54]'
  id: totrans-318
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: state.activeOverlay = null
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = null
- en: '[PRE55]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: <transition>
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: <过渡>
- en: <hand v-if="!activeOverlay" />
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="！activeOverlay" />
- en: </transition>
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: </过渡>
- en: '[PRE56]'
  id: totrans-324
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: <transition>
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: <过渡>
- en: <h1 v-if="showTitle">Title</h1>
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: <h1 v-if="showTitle">标题</h1>
- en: </transition>
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: </过渡>
- en: '[PRE57]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: <link rel="stylesheet" href="transitions.css" />
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: <link rel="stylesheet" href="transitions.css" />
- en: '[PRE58]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: .hand.v-enter-active,
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: .hand.v-enter-active，
- en: .hand.v-leave-active {
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: .hand.v-leave-active {
- en: 'transition: opacity 1s;'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 过渡：不透明度1s;
- en: '}'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE59]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: .hand.v-enter,
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: .hand.v-enter，
- en: .hand.v-leave-to {
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: .hand.v-leave-to {
- en: 'opacity: 0;'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 不透明度：0;
- en: '}'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE60]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: <transition>
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: <过渡>
- en: <hand v-if="!activeOverlay" :cards="testHand" />
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="！activeOverlay"：cards="testHand" />
- en: </transition>
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: </过渡>
- en: '[PRE61]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: <transition name="fade">
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: <过渡名称="淡入">
- en: <hand v-if="!activeOverlay" :cards="testHand" />
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="！activeOverlay"：cards="testHand" />
- en: </transition>
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: </过渡>
- en: '[PRE62]'
  id: totrans-348
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: .fade-enter-active,
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: .fade-enter-active，
- en: .fade-leave-active {
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: .fade-leave-active {
- en: 'transition: opacity 1s;'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 过渡：不透明度1s;
- en: '}'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: .fade-enter,
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: .fade-enter，
- en: .fade-leave-to {
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: .fade-leave-to {
- en: 'opacity: 0;'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 不透明度：0;
- en: '}'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE63]'
  id: totrans-357
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: .hand-enter-active,
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-enter-active，
- en: .hand-leave-active {
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-leave-active {
- en: 'transition: opacity .5s;'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 过渡：不透明度。5s;
- en: '}'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: .hand-enter,
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-enter，
- en: .hand-leave-to {
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-leave-to {
- en: 'opacity: 0;'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 不透明度：0;
- en: '}'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE64]'
  id: totrans-366
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: <transition name="hand">
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: <过渡名称="手">
- en: <hand v-if="!activeOverlay" :cards="testHand" />
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="!activeOverlay" :cards="testHand" />
- en: </transition>
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: </transition>
- en: '[PRE65]'
  id: totrans-370
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: .hand-enter-active .wrapper,
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-enter-active .wrapper,
- en: .hand-leave-active .wrapper {
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-leave-active .wrapper {
- en: 'transition: transform .8s cubic-bezier(.08,.74,.34,1);'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 'transition: transform .8s cubic-bezier(.08,.74,.34,1);'
- en: 'transform-origin: bottom center;'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 'transform-origin: bottom center;'
- en: '}'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: .hand-enter .wrapper,
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-enter .wrapper,
- en: .hand-leave-to .wrapper {
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-leave-to .wrapper {
- en: 'transform: rotateX(90deg);'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 'transform: rotateX(90deg);'
- en: '}'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE66]'
  id: totrans-380
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: .hand-enter-active .card,
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-enter-active .card,
- en: .hand-leave-active .card {
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-leave-active .card {
- en: 'transition: margin .8s cubic-bezier(.08,.74,.34,1);'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 'transition: margin .8s cubic-bezier(.08,.74,.34,1);'
- en: '}'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: .hand-enter .card,
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-enter .card,
- en: .hand-leave-to .card {
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: .hand-leave-to .card {
- en: 'margin: 0 -100px;'
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 'margin: 0 -100px;'
- en: '}'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE67]'
  id: totrans-389
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'methods: {'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: handlePlay (card) {
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: handlePlay (card) {
- en: this.$emit('card-play', card)
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: this.$emit('card-play', card)
- en: '},'
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE68]'
  id: totrans-395
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: <card v-for="card of cards" :def="card.def"
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: <card v-for="card of cards" :def="card.def"
- en: '@play="handlePlay(card) />'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: '@play="handlePlay(card) />'
- en: '[PRE69]'
  id: totrans-398
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'methods: {'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: // ...
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: testPlayCard (card) {
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: testPlayCard (card) {
- en: // Remove the card from player hand
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: // 从玩家手中移除卡片
- en: const index = this.testHand.indexOf(card)
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: const index = this.testHand.indexOf(card)
- en: this.testHand.splice(index, 1)
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: this.testHand.splice(index, 1)
- en: '}'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '},'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE70]'
  id: totrans-407
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: <hand v-if="!activeOverlay" :cards="testHand" @card-play="testPlayCard" />
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="!activeOverlay" :cards="testHand" @card-play="testPlayCard" />
- en: '[PRE71]'
  id: totrans-409
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: <transition-group>
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: <transition-group>
- en: <div v-for="item of items" />
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: <div v-for="item of items" />
- en: </transition-group>
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: </transition-group>
- en: '[PRE72]'
  id: totrans-413
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: <transition-group tag="ul">
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: <transition-group tag="ul">
- en: <li v-for="item of items" />
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: <li v-for="item of items" />
- en: </transition-group>
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: </transition-group>
- en: '[PRE73]'
  id: totrans-417
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: <transition-group name="card" tag="div" class="cards">
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: <transition-group name="card" tag="div" class="cards">
- en: <card v-for="card of cards" :def="card.def" @play="handlePlay(card) />
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: <card v-for="card of cards" :def="card.def" @play="handlePlay(card) />
- en: </transition-group>
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: </transition-group>
- en: '[PRE74]'
  id: totrans-421
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: <card v-for="card of cards" :def="card.def" :key="card.uid" @play="handlePlay(card)
    />
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: <card v-for="card of cards" :def="card.def" :key="card.uid" @play="handlePlay(card)
    />
- en: '[PRE75]'
  id: totrans-423
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: .card-move {
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: .card-move {
- en: 'transition: transform .3s;'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 'transition: transform .3s;'
- en: '}'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE76]'
  id: totrans-427
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: state.testHand.push($vm.testDrawCard())
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: state.testHand.push($vm.testDrawCard())
- en: '[PRE77]'
  id: totrans-429
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: .card {
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: .card {
- en: /* Used for enter, move and mouse over animations */
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: /* 用于进入、移动和鼠标悬停动画 */
- en: 'transition: all .3s;'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 'transition: all .3s;'
- en: '}'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE78]'
  id: totrans-434
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: .card-enter {
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: .card-enter {
- en: 'opacity: 0;'
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: 'opacity: 0;'
- en: /* Slide from the right */
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: /* 从右边滑动 */
- en: 'transform: scale(.8) translateX(100px);'
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: 'transform: scale(.8) translateX(100px);'
- en: '}'
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE79]'
  id: totrans-440
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: .card-leave-active {
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: .card-leave-active {
- en: /* We need different timings for the leave transition */
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: /* 我们需要不同的离开过渡时间 */
- en: 'transition: all 1s, opacity .5s .5s;'
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: 'transition: all 1s, opacity .5s .5s;'
- en: /* Keep it in the same horizontal position */
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: /* 保持在相同的水平位置 */
- en: 'position: absolute !important;'
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
  zh: 'position: absolute !important;'
- en: /* Make it painted over the other cards */
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: /* 使其覆盖其他卡片 */
- en: 'z-index: 10;'
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: 'z-index: 10;'
- en: /* Unclickable during the transition */
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: /* 在过渡期间不可点击 */
- en: 'pointer-events: none;'
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 'pointer-events: none;'
- en: '}'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: .card-leave-to {
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: .card-leave-to {
- en: 'opacity: 0;'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: 'opacity: 0;'
- en: /* Zoom the card upwards */
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: /* 将卡片向上放大 */
- en: 'transform: translateX(-106px) translateY(-300px) scale(1.5);'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 'transform: translateX(-106px) translateY(-300px) scale(1.5);'
- en: '}'
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE80]'
  id: totrans-456
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: // The consolidated state of our app
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: // 我们应用的综合状态
- en: var state = {
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: var state = {
- en: // UI
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: // UI
- en: 'activeOverlay: null,'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 'activeOverlay: null,'
- en: // ...
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: '}'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE81]'
  id: totrans-463
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: <overlay>
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay>
- en: <overlay-content-player-turn />
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-player-turn />
- en: </overlay>
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: '[PRE82]'
  id: totrans-467
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: Vue.component('overlay', {
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('overlay', {
- en: 'template: `<div class="overlay">'
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="overlay">'
- en: <div class="content">
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="content">
- en: <!-- Our slot will be there -->
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 我们的插槽将在那里 -->
- en: </div>
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: </div>`,
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '})'
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE83]'
  id: totrans-475
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: <div class="overlay" @click="handleClick">
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="overlay" @click="handleClick">
- en: '[PRE84]'
  id: totrans-477
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'methods: {'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: handleClick () {
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: handleClick () {
- en: this.$emit('close')
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: this.$emit('close')
- en: '},'
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE85]'
  id: totrans-483
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'template: `<div class="overlay" @click="handleClick">'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="overlay" @click="handleClick">'
- en: <div class="content">
  id: totrans-485
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="content">
- en: <slot />
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: <slot />
- en: </div>
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: </div>`,
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE86]'
  id: totrans-489
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: <overlay>
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay>
- en: Hello world!
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: 你好世界！
- en: </overlay>
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: '[PRE87]'
  id: totrans-493
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: <div class="overlay">
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="overlay">
- en: <div class="content">
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="content">
- en: Hello world!
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 你好世界！
- en: </div>
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: </div>
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: '[PRE88]'
  id: totrans-499
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: <overlay>
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay>
- en: Hello world!
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 你好世界！
- en: </overlay>
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: '[PRE89]'
  id: totrans-503
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: // Starting stats
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: // Starting stats
- en: 'food: 10,'
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 'food: 10,'
- en: 'health: 10,'
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: 'health: 10,'
- en: // Is skipping is next turn
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: // Is skipping is next turn
- en: 'skipTurn: false,'
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 'skipTurn: false,'
- en: // Skiped turn last time
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: // Skiped turn last time
- en: 'skippedTurn: false,'
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: 'skippedTurn: false,'
- en: 'hand: [],'
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 'hand: [],'
- en: 'lastPlayedCardId: null,'
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: 'lastPlayedCardId: null,'
- en: 'dead: false,'
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 'dead: false,'
- en: '[PRE90]'
  id: totrans-514
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: Vue.component('overlay-content-player-turn', {
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('overlay-content-player-turn', {
- en: 'template: `<div>'
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div>'
- en: <div class="big" v-if="player.skipTurn">{{ player.name }},      <br>your turn
    is skipped!</div>
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="big" v-if="player.skipTurn">{{ player.name }},      <br>your turn
    is skipped!</div>
- en: <div class="big" v-else>{{ player.name }},<br>your turn has       come!</div>
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="big" v-else>{{ player.name }},<br>your turn has       come!</div>
- en: <div>Tap to continue</div>
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: <div>Tap to continue</div>
- en: </div>`,
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''player''],'
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''player''],'
- en: '})'
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE91]'
  id: totrans-523
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: function getLastPlayedCard (player) {
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: function getLastPlayedCard (player) {
- en: return cards[player.lastPlayedCardId]
  id: totrans-525
  prefs: []
  type: TYPE_NORMAL
  zh: return cards[player.lastPlayedCardId]
- en: '}'
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE92]'
  id: totrans-527
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: Vue.component('overlay-content-last-play', {
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('overlay-content-last-play', {
- en: 'template: `<div>'
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div>'
- en: <div v-if="opponent.skippedTurn">{{ opponent.name }} turn was skipped!</div>
  id: totrans-530
  prefs: []
  type: TYPE_NORMAL
  zh: <div v-if="opponent.skippedTurn">{{ opponent.name }} turn was skipped!</div>
- en: <template v-else>
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: <template v-else>
- en: <div>{{ opponent.name }} just played:</div>
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: <div>{{ opponent.name }} just played:</div>
- en: <card :def="lastPlayedCard" />
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: <card :def="lastPlayedCard" />
- en: </template>
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: </template>
- en: </div>`,
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''opponent''],'
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''opponent''],'
- en: 'computed: {'
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: 'computed: {'
- en: lastPlayedCard () {
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: lastPlayedCard () {
- en: return getLastPlayedCard(this.opponent)
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: return getLastPlayedCard(this.opponent)
- en: '},'
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-541
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '})'
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE93]'
  id: totrans-543
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: Vue.component('player-result', {
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('player-result', {
- en: 'template: `<div class="player-result" :class="result">'
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div class="player-result" :class="result">'
- en: <span class="name">{{ player.name }}</span> is
  id: totrans-546
  prefs: []
  type: TYPE_NORMAL
  zh: <span class="name">{{ player.name }}</span> is
- en: <span class="result">{{ result }}</span>
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
  zh: <span class="result">{{ result }}</span>
- en: </div>`,
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''player''],'
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''player''],'
- en: 'computed: {'
  id: totrans-550
  prefs: []
  type: TYPE_NORMAL
  zh: 'computed: {'
- en: result () {
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: result () {
- en: 'return this.player.dead ? ''defeated'' : ''victorious'''
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
  zh: 'return this.player.dead ? ''defeated'' : ''victorious'''
- en: '},'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '})'
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE94]'
  id: totrans-556
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: Vue.component('overlay-content-game-over', {
  id: totrans-557
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('overlay-content-game-over', {
- en: 'template: `<div>'
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: 'template: `<div>'
- en: <div class="big">Game Over</div>
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="big">Game Over</div>
- en: <player-result v-for="player in players" :player="player" />
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: <player-result v-for="player in players" :player="player" />
- en: </div>`,
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''players''],'
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''players''],'
- en: '})'
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE95]'
  id: totrans-564
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: <overlay v-if="activeOverlay">
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay v-if="activeOverlay">
- en: <overlay-content-player-turn
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-player-turn
- en: v-if="activeOverlay === 'player-turn'" />
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: v-if="activeOverlay === 'player-turn'" />
- en: <overlay-content-last-play
  id: totrans-568
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-last-play
- en: v-else-if="activeOverlay === 'last-play'" />
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: v-else-if="activeOverlay === 'last-play'" />
- en: <overlay-content-game-over
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-game-over
- en: v-else-if="activeOverlay === 'game-over'" />
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: v-else-if="activeOverlay === 'game-over'" />
- en: </overlay>
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: '[PRE96]'
  id: totrans-573
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: get currentPlayer () {
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: get currentPlayer () {
- en: return state.players[state.currentPlayerIndex]
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: return state.players[state.currentPlayerIndex]
- en: '},'
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE97]'
  id: totrans-577
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: get currentOpponentId () {
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: get currentOpponentId () {
- en: 'return state.currentPlayerIndex === 0 ? 1 : 0'
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
  zh: 'return state.currentPlayerIndex === 0 ? 1 : 0'
- en: '},'
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE98]'
  id: totrans-581
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: get currentOpponent () {
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: get currentOpponent () {
- en: return state.players[state.currentOpponentId]
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: return state.players[state.currentOpponentId]
- en: '},'
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE99]'
  id: totrans-585
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: <overlay v-if="activeOverlay">
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay v-if="activeOverlay">
- en: <overlay-content-player-turn
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-player-turn
- en: v-if="activeOverlay === 'player-turn'"
  id: totrans-588
  prefs: []
  type: TYPE_NORMAL
  zh: v-if="activeOverlay === 'player-turn'"
- en: :player="currentPlayer" />
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: :player="currentPlayer" />
- en: <overlay-content-last-play
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-last-play
- en: v-else-if="activeOverlay === 'last-play'"
  id: totrans-591
  prefs: []
  type: TYPE_NORMAL
  zh: v-else-if="activeOverlay === 'last-play'"
- en: :opponent="currentOpponent" />
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: :opponent="currentOpponent" />
- en: <overlay-content-game-over
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay-content-game-over
- en: v-else-if="activeOverlay === 'game-over'"
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: v-else-if="activeOverlay === 'game-over'"
- en: :players="players" />
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: :players="players" />
- en: </overlay>
  id: totrans-596
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: '[PRE100]'
  id: totrans-597
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: state.activeOverlay = 'player-turn'
  id: totrans-598
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = 'player-turn'
- en: state.activeOverlay = 'last-play'
  id: totrans-599
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = 'last-play'
- en: state.activeOverlay = 'game-over'
  id: totrans-600
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = 'game-over'
- en: state.activeOverlay = null
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = null
- en: '[PRE101]'
  id: totrans-602
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: <component is="h1">Title</component>
  id: totrans-603
  prefs: []
  type: TYPE_NORMAL
  zh: <component is="h1">Title</component>
- en: <component is="overlay-content-player-turn" />
  id: totrans-604
  prefs: []
  type: TYPE_NORMAL
  zh: <component is="overlay-content-player-turn" />
- en: '[PRE102]'
  id: totrans-605
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: <component :is="'overlay-content-' + activeOverlay" />
  id: totrans-606
  prefs: []
  type: TYPE_NORMAL
  zh: <component :is="'overlay-content-' + activeOverlay" />
- en: '[PRE103]'
  id: totrans-607
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: <overlay v-if="activeOverlay">
  id: totrans-608
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay v-if="activeOverlay">
- en: <component :is="'overlay-content-' + activeOverlay"
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: <component :is="'overlay-content-' + activeOverlay"
- en: :player="currentPlayer" :opponent="currentOpponent"
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: ：player="currentPlayer"：opponent="currentOpponent"
- en: :players="players" />
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: :players="players" />
- en: </overlay>
  id: totrans-612
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: '[PRE104]'
  id: totrans-613
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: <transition name="zoom">
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: <transition name="zoom">
- en: <overlay v-if="activeOverlay">
  id: totrans-615
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay v-if="activeOverlay">
- en: <component :is="'overlay-content-' + activeOverlay"
  id: totrans-616
  prefs: []
  type: TYPE_NORMAL
  zh: <component :is="'overlay-content-' + activeOverlay"
- en: :player="currentPlayer" :opponent="currentOpponent"
  id: totrans-617
  prefs: []
  type: TYPE_NORMAL
  zh: ：player="currentPlayer"：opponent="currentOpponent"
- en: :players="players" />
  id: totrans-618
  prefs: []
  type: TYPE_NORMAL
  zh: ：players="players" />
- en: </overlay>
  id: totrans-619
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: </transition>
  id: totrans-620
  prefs: []
  type: TYPE_NORMAL
  zh: </transition>
- en: '[PRE105]'
  id: totrans-621
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: .zoom-enter-active,
  id: totrans-622
  prefs: []
  type: TYPE_NORMAL
  zh: .zoom-enter-active，
- en: .zoom-leave-active {
  id: totrans-623
  prefs: []
  type: TYPE_NORMAL
  zh: .zoom-leave-active {
- en: 'transition: opacity .3s, transform .3s;'
  id: totrans-624
  prefs: []
  type: TYPE_NORMAL
  zh: 过渡：不透明度.3秒，变换.3秒;
- en: '}'
  id: totrans-625
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: .zoom-enter,
  id: totrans-626
  prefs: []
  type: TYPE_NORMAL
  zh: .zoom-enter，
- en: .zoom-leave-to {
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: .zoom-leave-to {
- en: 'opacity: 0;'
  id: totrans-628
  prefs: []
  type: TYPE_NORMAL
  zh: 不透明度：0;
- en: 'transform: scale(.7);'
  id: totrans-629
  prefs: []
  type: TYPE_NORMAL
  zh: transform：scale（.7）;
- en: '}'
  id: totrans-630
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE106]'
  id: totrans-631
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: <transition name="zoom">
  id: totrans-632
  prefs: []
  type: TYPE_NORMAL
  zh: <transition name="zoom">
- en: <overlay v-if="activeOverlay" :key="activeOverlay">
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay v-if="activeOverlay"：key="activeOverlay">
- en: <component :is="'overlay-content-' + activeOverlay" :player="currentPlayer"
    :opponent="currentOpponent" :players="players" />
  id: totrans-634
  prefs: []
  type: TYPE_NORMAL
  zh: <component :is="'overlay-content-' + activeOverlay"：player="currentPlayer"：opponent="currentOpponent"：players="players"
    />
- en: </overlay>
  id: totrans-635
  prefs: []
  type: TYPE_NORMAL
  zh: </overlay>
- en: </transition>
  id: totrans-636
  prefs: []
  type: TYPE_NORMAL
  zh: </transition>
- en: '[PRE107]'
  id: totrans-637
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: <transition name="fade">
  id: totrans-638
  prefs: []
  type: TYPE_NORMAL
  zh: <transition name="fade">
- en: <div class="overlay-background" v-if="activeOverlay" />
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="overlay-background" v-if="activeOverlay" />
- en: </transition>
  id: totrans-640
  prefs: []
  type: TYPE_NORMAL
  zh: </transition>
- en: '[PRE108]'
  id: totrans-641
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: <!-- ... -->
  id: totrans-642
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- ... -->
- en: <script src="components/ui.js"></script>
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="components/ui.js"></script>
- en: <script src="components/world.js"></script>
  id: totrans-644
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="components/world.js"></script>
- en: <script src="main.js"></script>
  id: totrans-645
  prefs: []
  type: TYPE_NORMAL
  zh: <script src="main.js"></script>
- en: '[PRE109]'
  id: totrans-646
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: Vue.component('castle', {
  id: totrans-647
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('castle'，{
- en: 'template: `<div class="castle" :class="''player-'' + index">'
  id: totrans-648
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="castle"：class="'player-' + index">
- en: <img class="building" :src="'svg/castle' + index + '.svg'" />
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="building"：src="'svg/castle' + index + '.svg'" />
- en: <img class="ground" :src="'svg/ground' + index + '.svg'" />
  id: totrans-650
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="ground"：src="'svg/ground' + index + '.svg'" />
- en: <!-- Later, we will add a castle-banners component here -->
  id: totrans-651
  prefs: []
  type: TYPE_NORMAL
  zh: <!--稍后，我们将在这里添加一个城堡横幅组件-->
- en: </div>`,
  id: totrans-652
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''player'', ''index''],'
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: props：['player'，'index']，
- en: '})'
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE110]'
  id: totrans-655
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: <div class="world">
  id: totrans-656
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="world">
- en: <castle v-for="(player, index) in players" :player="player"
  id: totrans-657
  prefs: []
  type: TYPE_NORMAL
  zh: <castle v-for="(player，index) in players"：player="player"
- en: :index="index" />
  id: totrans-658
  prefs: []
  type: TYPE_NORMAL
  zh: ：index="index" />
- en: <div class="land" />
  id: totrans-659
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="land" />
- en: </div>
  id: totrans-660
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: '[PRE111]'
  id: totrans-661
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: Vue.component('castle-banners', {
  id: totrans-662
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('castle-banners'，{
- en: 'template: `<div class="banners">'
  id: totrans-663
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="banners">
- en: <!-- Food -->
  id: totrans-664
  prefs: []
  type: TYPE_NORMAL
  zh: <!--食物-->
- en: <img class="food-icon" src="svg/food-icon.svg" />
  id: totrans-665
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="food-icon" src="svg/food-icon.svg" />
- en: <!-- Bubble here -->
  id: totrans-666
  prefs: []
  type: TYPE_NORMAL
  zh: <!--这里是气泡-->
- en: <!-- Banner bar here -->
  id: totrans-667
  prefs: []
  type: TYPE_NORMAL
  zh: <!--横幅栏在这里-->
- en: <!-- Health -->
  id: totrans-668
  prefs: []
  type: TYPE_NORMAL
  zh: <!--健康-->
- en: <img class="health-icon" src="svg/health-icon.svg" />
  id: totrans-669
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="health-icon" src="svg/health-icon.svg" />
- en: <!-- Bubble here -->
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: <!--这里是气泡-->
- en: <!-- Banner bar here -->
  id: totrans-671
  prefs: []
  type: TYPE_NORMAL
  zh: <!--横幅栏在这里-->
- en: </div>`,
  id: totrans-672
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''player''],'
  id: totrans-673
  prefs: []
  type: TYPE_NORMAL
  zh: props：['player']，
- en: '})'
  id: totrans-674
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE112]'
  id: totrans-675
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: 'computed: {'
  id: totrans-676
  prefs: []
  type: TYPE_NORMAL
  zh: 计算：{
- en: foodRatio () {
  id: totrans-677
  prefs: []
  type: TYPE_NORMAL
  zh: foodRatio（）{
- en: return this.player.food / maxFood
  id: totrans-678
  prefs: []
  type: TYPE_NORMAL
  zh: 返回this.player.food / maxFood
- en: '},'
  id: totrans-679
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: healthRatio () {
  id: totrans-680
  prefs: []
  type: TYPE_NORMAL
  zh: healthRatio（）{
- en: return this.player.health / maxHealth
  id: totrans-681
  prefs: []
  type: TYPE_NORMAL
  zh: 返回this.player.health / maxHealth
- en: '},'
  id: totrans-682
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-683
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE113]'
  id: totrans-684
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: 'template: `<div class="castle" :class="''player-'' + index">'
  id: totrans-685
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="castle"：class="'player-' + index">
- en: <img class="building" :src="'svg/castle' + index + '.svg'" />
  id: totrans-686
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="building"：src="'svg/castle' + index + '.svg'" />
- en: <img class="ground" :src="'svg/ground' + index + '.svg'" />
  id: totrans-687
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="ground"：src="'svg/ground' + index + '.svg'" />
- en: <castle-banners :player="player" />
  id: totrans-688
  prefs: []
  type: TYPE_NORMAL
  zh: <castle-banners：player="player" />
- en: </div>`,
  id: totrans-689
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE114]'
  id: totrans-690
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: (this.ratio * 220 + 40) * state.worldRatio + 'px'
  id: totrans-691
  prefs: []
  type: TYPE_NORMAL
  zh: （this.ratio * 220 + 40）* state.worldRatio + 'px'
- en: '[PRE115]'
  id: totrans-692
  prefs: []
  type: TYPE_PRE
  zh: '[PRE115]'
- en: Vue.component('bubble', {
  id: totrans-693
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('bubble'，{
- en: 'template: `<div class="stat-bubble" :class="type + ''-bubble''"'
  id: totrans-694
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="stat-bubble"：class="type + '-bubble'"
- en: :style="bubbleStyle">
  id: totrans-695
  prefs: []
  type: TYPE_NORMAL
  zh: ：style="bubbleStyle">
- en: <img :src="'svg/' + type + '-bubble.svg'" />
  id: totrans-696
  prefs: []
  type: TYPE_NORMAL
  zh: <img：src="'svg/' + type + '-bubble.svg'" />
- en: <div class="counter">{{ value }}</div>
  id: totrans-697
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="counter">{{ value }}</div>
- en: </div>`,
  id: totrans-698
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''type'', ''value'', ''ratio''],'
  id: totrans-699
  prefs: []
  type: TYPE_NORMAL
  zh: props：['type'，'value'，'ratio']，
- en: 'computed: {'
  id: totrans-700
  prefs: []
  type: TYPE_NORMAL
  zh: 计算：{
- en: bubbleStyle () {
  id: totrans-701
  prefs: []
  type: TYPE_NORMAL
  zh: 气泡样式（）{
- en: return {
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: 返回{
- en: 'top: (this.ratio * 220 + 40) * state.worldRatio + ''px'','
  id: totrans-703
  prefs: []
  type: TYPE_NORMAL
  zh: 顶部：（this.ratio * 220 + 40）* state.worldRatio + 'px'，
- en: '}'
  id: totrans-704
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '},'
  id: totrans-705
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '},'
  id: totrans-706
  prefs: []
  type: TYPE_NORMAL
  zh: '}，'
- en: '})'
  id: totrans-707
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE116]'
  id: totrans-708
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: 'template: `<div class="banners">'
  id: totrans-709
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="横幅">
- en: <!-- Food -->
  id: totrans-710
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 食物 -->
- en: <img class="food-icon" src="svg/food-icon.svg" />
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="食物图标" src="svg/食物图标.svg" />
- en: <bubble type="food" :value="player.food" :ratio="foodRatio" />
  id: totrans-712
  prefs: []
  type: TYPE_NORMAL
  zh: <bubble 类型="食物" :值="玩家.食物" :比率="食物比率" />
- en: <!-- Banner bar here -->
  id: totrans-713
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 横幅栏在这里 -->
- en: <!-- Health -->
  id: totrans-714
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 健康 -->
- en: <img class="health-icon" src="svg/health-icon.svg" />
  id: totrans-715
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="健康图标" src="svg/健康图标.svg" />
- en: <bubble type="health" :value="player.health"
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: <bubble 类型="健康" :值="玩家.健康"
- en: :ratio="healthRatio" />
  id: totrans-717
  prefs: []
  type: TYPE_NORMAL
  zh: :比率="健康比率" />
- en: <!-- Banner bar here -->
  id: totrans-718
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 横幅栏在这里 -->
- en: </div>`,
  id: totrans-719
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE117]'
  id: totrans-720
  prefs: []
  type: TYPE_PRE
  zh: '[PRE117]'
- en: Vue.component('banner-bar', {
  id: totrans-721
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('横幅栏', {
- en: 'props: [''color'', ''ratio''],'
  id: totrans-722
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''颜色'', ''比率''],'
- en: 'computed: {'
  id: totrans-723
  prefs: []
  type: TYPE_NORMAL
  zh: 'computed: {'
- en: height () {
  id: totrans-724
  prefs: []
  type: TYPE_NORMAL
  zh: height () {
- en: return 220 * this.ratio + 40
  id: totrans-725
  prefs: []
  type: TYPE_NORMAL
  zh: return 220 * this.ratio + 40
- en: '},'
  id: totrans-726
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-727
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '})'
  id: totrans-728
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE118]'
  id: totrans-729
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: <script type="text/x-template" id="banner">
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: <script type="text/x-template" id="横幅">
- en: <svg viewBox="0 0 20 260">
  id: totrans-731
  prefs: []
  type: TYPE_NORMAL
  zh: <svg viewBox="0 0 20 260">
- en: <path :d="`m 0,0 20,0 0,${height} -10,-10 -10,10 z`"
  id: totrans-732
  prefs: []
  type: TYPE_NORMAL
  zh: <path :d="`m 0,0 20,0 0,${height} -10,-10 -10,10 z`"
- en: :style="`fill:${color};stroke:none;`" />
  id: totrans-733
  prefs: []
  type: TYPE_NORMAL
  zh: :style="`填充：${颜色}；描边：无；`" />
- en: </svg>
  id: totrans-734
  prefs: []
  type: TYPE_NORMAL
  zh: </svg>
- en: </script>
  id: totrans-735
  prefs: []
  type: TYPE_NORMAL
  zh: </script>
- en: '[PRE119]'
  id: totrans-736
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: Vue.component('banner-bar', {
  id: totrans-737
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('横幅栏', {
- en: 'template: ''#banner'','
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：'#横幅',
- en: // ...
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: '})'
  id: totrans-740
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE120]'
  id: totrans-741
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: 'template: `<div class="banners">'
  id: totrans-742
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="横幅">
- en: <!-- Food -->
  id: totrans-743
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 食物 -->
- en: <img class="food-icon" src="svg/food-icon.svg" />
  id: totrans-744
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="食物图标" src="svg/食物图标.svg" />
- en: <bubble type="food" :value="player.food" :ratio="foodRatio" />
  id: totrans-745
  prefs: []
  type: TYPE_NORMAL
  zh: <bubble 类型="食物" :值="玩家.食物" :比率="食物比率" />
- en: <banner-bar class="food-bar" color="#288339" :ratio="foodRatio"
  id: totrans-746
  prefs: []
  type: TYPE_NORMAL
  zh: <横幅栏 class="食物栏" 颜色="#288339" :比率="食物比率"
- en: />
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: />
- en: <!-- Health -->
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: <!-- 健康 -->
- en: <img class="health-icon" src="svg/health-icon.svg" />
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: <img class="健康图标" src="svg/健康图标.svg" />
- en: <bubble type="health" :value="player.health"
  id: totrans-750
  prefs: []
  type: TYPE_NORMAL
  zh: <bubble 类型="健康" :值="玩家.健康"
- en: :ratio="healthRatio" />
  id: totrans-751
  prefs: []
  type: TYPE_NORMAL
  zh: :比率="健康比率" />
- en: <banner-bar class="health-bar" color="#9b2e2e"
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: <横幅栏 class="健康栏" 颜色="#9b2e2e"
- en: :ratio="healthRatio" />
  id: totrans-753
  prefs: []
  type: TYPE_NORMAL
  zh: :比率="健康比率" />
- en: </div>`,
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: '[PRE121]'
  id: totrans-755
  prefs: []
  type: TYPE_PRE
  zh: '[PRE121]'
- en: 'computed: {'
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: 'computed: {'
- en: targetHeight () {
  id: totrans-757
  prefs: []
  type: TYPE_NORMAL
  zh: targetHeight () {
- en: return 220 * this.ratio + 40
  id: totrans-758
  prefs: []
  type: TYPE_NORMAL
  zh: return 220 * this.ratio + 40
- en: '},'
  id: totrans-759
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-760
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE122]'
  id: totrans-761
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: data () {
  id: totrans-762
  prefs: []
  type: TYPE_NORMAL
  zh: 数据() {
- en: return {
  id: totrans-763
  prefs: []
  type: TYPE_NORMAL
  zh: return {
- en: 'height: 0,'
  id: totrans-764
  prefs: []
  type: TYPE_NORMAL
  zh: 'height: 0,'
- en: '}'
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '},'
  id: totrans-766
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE123]'
  id: totrans-767
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: created () {
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: created () {
- en: this.height = this.targetHeight
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: this.height = this.targetHeight
- en: '},'
  id: totrans-770
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE124]'
  id: totrans-771
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
- en: 'watch: {'
  id: totrans-772
  prefs: []
  type: TYPE_NORMAL
  zh: 'watch: {'
- en: targetHeight (newValue, oldValue) {
  id: totrans-773
  prefs: []
  type: TYPE_NORMAL
  zh: targetHeight (newValue, oldValue) {
- en: const vm = this
  id: totrans-774
  prefs: []
  type: TYPE_NORMAL
  zh: const vm = this
- en: 'new TWEEN.Tween({ value: oldValue })'
  id: totrans-775
  prefs: []
  type: TYPE_NORMAL
  zh: 'new TWEEN.Tween({ value: oldValue })'
- en: .easing(TWEEN.Easing.Cubic.InOut)
  id: totrans-776
  prefs: []
  type: TYPE_NORMAL
  zh: .easing(TWEEN.Easing.Cubic.InOut)
- en: '.to({ value: newValue }, 500)'
  id: totrans-777
  prefs: []
  type: TYPE_NORMAL
  zh: '.to({ value: newValue }, 500)'
- en: .onUpdate(function () {
  id: totrans-778
  prefs: []
  type: TYPE_NORMAL
  zh: .onUpdate(function () {
- en: vm.height = this.value.toFixed(0)
  id: totrans-779
  prefs: []
  type: TYPE_NORMAL
  zh: vm.height = this.value.toFixed(0)
- en: '})'
  id: totrans-780
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: .start()
  id: totrans-781
  prefs: []
  type: TYPE_NORMAL
  zh: .start()
- en: '},'
  id: totrans-782
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-783
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE125]'
  id: totrans-784
  prefs: []
  type: TYPE_PRE
  zh: '[PRE125]'
- en: // Tween.js
  id: totrans-785
  prefs: []
  type: TYPE_NORMAL
  zh: // Tween.js
- en: requestAnimationFrame(animate);
  id: totrans-786
  prefs: []
  type: TYPE_NORMAL
  zh: requestAnimationFrame(animate);
- en: function animate(time) {
  id: totrans-787
  prefs: []
  type: TYPE_NORMAL
  zh: function animate(time) {
- en: requestAnimationFrame(animate);
  id: totrans-788
  prefs: []
  type: TYPE_NORMAL
  zh: requestAnimationFrame(animate);
- en: TWEEN.update(time);
  id: totrans-789
  prefs: []
  type: TYPE_NORMAL
  zh: TWEEN.update(time);
- en: '}'
  id: totrans-790
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE126]'
  id: totrans-791
  prefs: []
  type: TYPE_PRE
  zh: '[PRE126]'
- en: const cloudAnimationDurations = {
  id: totrans-792
  prefs: []
  type: TYPE_NORMAL
  zh: const cloudAnimationDurations = {
- en: 'min: 10000, // 10 sec'
  id: totrans-793
  prefs: []
  type: TYPE_NORMAL
  zh: 'min: 10000, // 10 秒'
- en: 'max: 50000, // 50 sec'
  id: totrans-794
  prefs: []
  type: TYPE_NORMAL
  zh: 'max: 50000, // 50 秒'
- en: '}'
  id: totrans-795
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE127]'
  id: totrans-796
  prefs: []
  type: TYPE_PRE
  zh: '[PRE127]'
- en: Vue.component('cloud', {
  id: totrans-797
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.component('云', {
- en: 'template: `<div class="cloud" :class="''cloud-'' + type" >'
  id: totrans-798
  prefs: []
  type: TYPE_NORMAL
  zh: 模板：`<div class="云" :class="'云-' + 类型" >
- en: <img :src="'svg/cloud' + type + '.svg'" />
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: <img :src="'svg/云' + 类型 + '.svg'" />
- en: </div>`,
  id: totrans-800
  prefs: []
  type: TYPE_NORMAL
  zh: </div>`,
- en: 'props: [''type''],'
  id: totrans-801
  prefs: []
  type: TYPE_NORMAL
  zh: 'props: [''类型''],'
- en: '})'
  id: totrans-802
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: '[PRE128]'
  id: totrans-803
  prefs: []
  type: TYPE_PRE
  zh: '[PRE128]'
- en: data () {
  id: totrans-804
  prefs: []
  type: TYPE_NORMAL
  zh: 数据() {
- en: return {
  id: totrans-805
  prefs: []
  type: TYPE_NORMAL
  zh: return {
- en: 'style: {'
  id: totrans-806
  prefs: []
  type: TYPE_NORMAL
  zh: 'style: {'
- en: 'transform: ''none'','
  id: totrans-807
  prefs: []
  type: TYPE_NORMAL
  zh: 'transform: ''none'','
- en: 'zIndex: 0,'
  id: totrans-808
  prefs: []
  type: TYPE_NORMAL
  zh: 'zIndex: 0,'
- en: '},'
  id: totrans-809
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-810
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '},'
  id: totrans-811
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE129]'
  id: totrans-812
  prefs: []
  type: TYPE_PRE
  zh: '[PRE129]'
- en: <div class="cloud" :class="'cloud-' + type" :style="style">
  id: totrans-813
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="云" :class="'云-' + 类型" :style="style">
- en: '[PRE130]'
  id: totrans-814
  prefs: []
  type: TYPE_PRE
  zh: '[PRE130]'
- en: 'methods: {'
  id: totrans-815
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: setPosition (left, top) {
  id: totrans-816
  prefs: []
  type: TYPE_NORMAL
  zh: setPosition (left, top) {
- en: // Use transform for better performance
  id: totrans-817
  prefs: []
  type: TYPE_NORMAL
  zh: // 使用变换以获得更好的性能
- en: this.style.transform = `translate(${left}px, ${top}px)`
  id: totrans-818
  prefs: []
  type: TYPE_NORMAL
  zh: this.style.transform = `translate(${left}px, ${top}px)`
- en: '},'
  id: totrans-819
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-820
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE131]'
  id: totrans-821
  prefs: []
  type: TYPE_PRE
  zh: '[PRE131]'
- en: 'methods: {'
  id: totrans-822
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: // ...
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: initPosition () {
  id: totrans-824
  prefs: []
  type: TYPE_NORMAL
  zh: initPosition () {
- en: // Element width
  id: totrans-825
  prefs: []
  type: TYPE_NORMAL
  zh: // 元素宽度
- en: const width = this.$el.clientWidth
  id: totrans-826
  prefs: []
  type: TYPE_NORMAL
  zh: const width = this.$el.clientWidth
- en: this.setPosition(-width, 0)
  id: totrans-827
  prefs: []
  type: TYPE_NORMAL
  zh: this.setPosition(-width, 0)
- en: '},'
  id: totrans-828
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-829
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE132]'
  id: totrans-830
  prefs: []
  type: TYPE_PRE
  zh: '[PRE132]'
- en: <img :src="'svg/cloud' + type + '.svg'" @load="initPosition" />
  id: totrans-831
  prefs: []
  type: TYPE_NORMAL
  zh: <img :src="'svg/云' + 类型 + '.svg'" @load="initPosition" />
- en: '[PRE133]'
  id: totrans-832
  prefs: []
  type: TYPE_PRE
  zh: '[PRE133]'
- en: 'methods: {'
  id: totrans-833
  prefs: []
  type: TYPE_NORMAL
  zh: 方法：{
- en: // ...
  id: totrans-834
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: startAnimation (delay = 0) {
  id: totrans-835
  prefs: []
  type: TYPE_NORMAL
  zh: startAnimation (delay = 0) {
- en: const vm = this
  id: totrans-836
  prefs: []
  type: TYPE_NORMAL
  zh: const vm = this
- en: // Element width
  id: totrans-837
  prefs: []
  type: TYPE_NORMAL
  zh: // 元素宽度
- en: const width = this.$el.clientWidth
  id: totrans-838
  prefs: []
  type: TYPE_NORMAL
  zh: const width = this.$el.clientWidth
- en: // Random animation duration
  id: totrans-839
  prefs: []
  type: TYPE_NORMAL
  zh: // 随机动画持续时间
- en: const { min, max } = cloudAnimationDurations
  id: totrans-840
  prefs: []
  type: TYPE_NORMAL
  zh: const { min, max } = cloudAnimationDurations
- en: const animationDuration = Math.random() * (max - min) + min
  id: totrans-841
  prefs: []
  type: TYPE_NORMAL
  zh: const animationDuration = Math.random() * (max - min) + min
- en: // Bing faster clouds forward
  id: totrans-842
  prefs: []
  type: TYPE_NORMAL
  zh: // Bing faster clouds forward
- en: this.style.zIndex = Math.round(max - animationDuration)
  id: totrans-843
  prefs: []
  type: TYPE_NORMAL
  zh: this.style.zIndex = Math.round(max - animationDuration)
- en: // Animation will be there
  id: totrans-844
  prefs: []
  type: TYPE_NORMAL
  zh: // Animation will be there
- en: '},'
  id: totrans-845
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-846
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE134]'
  id: totrans-847
  prefs: []
  type: TYPE_PRE
  zh: '[PRE134]'
- en: // Random position
  id: totrans-848
  prefs: []
  type: TYPE_NORMAL
  zh: // Random position
- en: const top = Math.random() * (window.innerHeight * 0.3)
  id: totrans-849
  prefs: []
  type: TYPE_NORMAL
  zh: const top = Math.random() * (window.innerHeight * 0.3)
- en: 'new TWEEN.Tween({ value: -width })'
  id: totrans-850
  prefs: []
  type: TYPE_NORMAL
  zh: 'new TWEEN.Tween({ value: -width })'
- en: '.to({ value: window.innerWidth }, animationDuration)'
  id: totrans-851
  prefs: []
  type: TYPE_NORMAL
  zh: '.to({ value: window.innerWidth }, animationDuration)'
- en: .delay(delay)
  id: totrans-852
  prefs: []
  type: TYPE_NORMAL
  zh: .delay(delay)
- en: .onUpdate(function () {
  id: totrans-853
  prefs: []
  type: TYPE_NORMAL
  zh: .onUpdate(function () {
- en: vm.setPosition(this.value, top)
  id: totrans-854
  prefs: []
  type: TYPE_NORMAL
  zh: vm.setPosition(this.value, top)
- en: '})'
  id: totrans-855
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: .onComplete(() => {
  id: totrans-856
  prefs: []
  type: TYPE_NORMAL
  zh: .onComplete(() => {
- en: // With a random delay
  id: totrans-857
  prefs: []
  type: TYPE_NORMAL
  zh: // With a random delay
- en: this.startAnimation(Math.random() * 10000)
  id: totrans-858
  prefs: []
  type: TYPE_NORMAL
  zh: this.startAnimation(Math.random() * 10000)
- en: '})'
  id: totrans-859
  prefs: []
  type: TYPE_NORMAL
  zh: '})'
- en: .start()
  id: totrans-860
  prefs: []
  type: TYPE_NORMAL
  zh: .start()
- en: '[PRE135]'
  id: totrans-861
  prefs: []
  type: TYPE_PRE
  zh: '[PRE135]'
- en: mounted () {
  id: totrans-862
  prefs: []
  type: TYPE_NORMAL
  zh: mounted () {
- en: // We start the animation with a negative delay
  id: totrans-863
  prefs: []
  type: TYPE_NORMAL
  zh: // We start the animation with a negative delay
- en: // So it begins midway
  id: totrans-864
  prefs: []
  type: TYPE_NORMAL
  zh: // So it begins midway
- en: this.startAnimation(-Math.random() *
  id: totrans-865
  prefs: []
  type: TYPE_NORMAL
  zh: this.startAnimation(-Math.random() *
- en: cloudAnimationDurations.min)
  id: totrans-866
  prefs: []
  type: TYPE_NORMAL
  zh: cloudAnimationDurations.min)
- en: '},'
  id: totrans-867
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE136]'
  id: totrans-868
  prefs: []
  type: TYPE_PRE
  zh: '[PRE136]'
- en: <div class="clouds">
  id: totrans-869
  prefs: []
  type: TYPE_NORMAL
  zh: <div class="clouds">
- en: <cloud v-for="index in 10" :type="(index - 1) % 5 + 1" />
  id: totrans-870
  prefs: []
  type: TYPE_NORMAL
  zh: <cloud v-for="index in 10" :type="(index - 1) % 5 + 1" />
- en: </div>
  id: totrans-871
  prefs: []
  type: TYPE_NORMAL
  zh: </div>
- en: '[PRE137]'
  id: totrans-872
  prefs: []
  type: TYPE_PRE
  zh: '[PRE137]'
- en: var state = {
  id: totrans-873
  prefs: []
  type: TYPE_NORMAL
  zh: var state = {
- en: // ...
  id: totrans-874
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: 'drawPile: pile,'
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: 'drawPile: pile,'
- en: 'discardPile: {},'
  id: totrans-876
  prefs: []
  type: TYPE_NORMAL
  zh: 'discardPile: {},'
- en: '}'
  id: totrans-877
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE138]'
  id: totrans-878
  prefs: []
  type: TYPE_PRE
  zh: '[PRE138]'
- en: drawInitialHand(player)
  id: totrans-879
  prefs: []
  type: TYPE_NORMAL
  zh: drawInitialHand(player)
- en: '[PRE139]'
  id: totrans-880
  prefs: []
  type: TYPE_PRE
  zh: '[PRE139]'
- en: function beginGame () {
  id: totrans-881
  prefs: []
  type: TYPE_NORMAL
  zh: function beginGame () {
- en: state.players.forEach(drawInitialHand)
  id: totrans-882
  prefs: []
  type: TYPE_NORMAL
  zh: state.players.forEach(drawInitialHand)
- en: '}'
  id: totrans-883
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE140]'
  id: totrans-884
  prefs: []
  type: TYPE_PRE
  zh: '[PRE140]'
- en: mounted () {
  id: totrans-885
  prefs: []
  type: TYPE_NORMAL
  zh: mounted () {
- en: beginGame()
  id: totrans-886
  prefs: []
  type: TYPE_NORMAL
  zh: beginGame()
- en: '},'
  id: totrans-887
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE141]'
  id: totrans-888
  prefs: []
  type: TYPE_PRE
  zh: '[PRE141]'
- en: get currentHand () {
  id: totrans-889
  prefs: []
  type: TYPE_NORMAL
  zh: get currentHand () {
- en: return state.currentPlayer.hand
  id: totrans-890
  prefs: []
  type: TYPE_NORMAL
  zh: return state.currentPlayer.hand
- en: '},'
  id: totrans-891
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE142]'
  id: totrans-892
  prefs: []
  type: TYPE_PRE
  zh: '[PRE142]'
- en: <hand v-if="!activeOverlay" :cards="currentHand" @card-
  id: totrans-893
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="!activeOverlay" :cards="currentHand" @card-
- en: play="testPlayCard" />
  id: totrans-894
  prefs: []
  type: TYPE_NORMAL
  zh: play="testPlayCard" />
- en: '[PRE143]'
  id: totrans-895
  prefs: []
  type: TYPE_PRE
  zh: '[PRE143]'
- en: created () {
  id: totrans-896
  prefs: []
  type: TYPE_NORMAL
  zh: created () {
- en: this.testHand = this.createTestHand()
  id: totrans-897
  prefs: []
  type: TYPE_NORMAL
  zh: this.testHand = this.createTestHand()
- en: '},'
  id: totrans-898
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE144]'
  id: totrans-899
  prefs: []
  type: TYPE_PRE
  zh: '[PRE144]'
- en: var state = {
  id: totrans-900
  prefs: []
  type: TYPE_NORMAL
  zh: var state = {
- en: // ...
  id: totrans-901
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: 'canPlay: false,'
  id: totrans-902
  prefs: []
  type: TYPE_NORMAL
  zh: 'canPlay: false,'
- en: '}'
  id: totrans-903
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE145]'
  id: totrans-904
  prefs: []
  type: TYPE_PRE
  zh: '[PRE145]'
- en: 'computed: {'
  id: totrans-905
  prefs: []
  type: TYPE_NORMAL
  zh: 'computed: {'
- en: cssClass () {
  id: totrans-906
  prefs: []
  type: TYPE_NORMAL
  zh: cssClass () {
- en: return {
  id: totrans-907
  prefs: []
  type: TYPE_NORMAL
  zh: return {
- en: '''can-play'': this.canPlay,'
  id: totrans-908
  prefs: []
  type: TYPE_NORMAL
  zh: '''can-play'': this.canPlay,'
- en: '}'
  id: totrans-909
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '},'
  id: totrans-910
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-911
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE146]'
  id: totrans-912
  prefs: []
  type: TYPE_PRE
  zh: '[PRE146]'
- en: <div id="#app" :class="cssClass">
  id: totrans-913
  prefs: []
  type: TYPE_NORMAL
  zh: <div id="#app" :class="cssClass">
- en: '[PRE147]'
  id: totrans-914
  prefs: []
  type: TYPE_PRE
  zh: '[PRE147]'
- en: function playCard (card) {
  id: totrans-915
  prefs: []
  type: TYPE_NORMAL
  zh: function playCard (card) {
- en: if (state.canPlay) {
  id: totrans-916
  prefs: []
  type: TYPE_NORMAL
  zh: if (state.canPlay) {
- en: state.canPlay = false
  id: totrans-917
  prefs: []
  type: TYPE_NORMAL
  zh: state.canPlay = false
- en: currentPlayingCard = card
  id: totrans-918
  prefs: []
  type: TYPE_NORMAL
  zh: currentPlayingCard = card
- en: // Remove the card from player hand
  id: totrans-919
  prefs: []
  type: TYPE_NORMAL
  zh: // Remove the card from player hand
- en: const index = state.currentPlayer.hand.indexOf(card)
  id: totrans-920
  prefs: []
  type: TYPE_NORMAL
  zh: const index = state.currentPlayer.hand.indexOf(card)
- en: state.currentPlayer.hand.splice(index, 1)
  id: totrans-921
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayer.hand.splice(index, 1)
- en: // Add the card to the discard pile
  id: totrans-922
  prefs: []
  type: TYPE_NORMAL
  zh: // Add the card to the discard pile
- en: addCardToPile(state.discardPile, card.id)
  id: totrans-923
  prefs: []
  type: TYPE_NORMAL
  zh: addCardToPile(state.discardPile, card.id)
- en: '}'
  id: totrans-924
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}'
  id: totrans-925
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE148]'
  id: totrans-926
  prefs: []
  type: TYPE_PRE
  zh: '[PRE148]'
- en: 'methods: {'
  id: totrans-927
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: handlePlayCard (card) {
  id: totrans-928
  prefs: []
  type: TYPE_NORMAL
  zh: handlePlayCard (card) {
- en: playCard(card)
  id: totrans-929
  prefs: []
  type: TYPE_NORMAL
  zh: playCard(card)
- en: '},'
  id: totrans-930
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-931
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE149]'
  id: totrans-932
  prefs: []
  type: TYPE_PRE
  zh: '[PRE149]'
- en: <hand v-if="!activeOverlay" :cards="currentHand" @card-
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="!activeOverlay" :cards="currentHand" @card-
- en: play="handlePlayCard" />
  id: totrans-934
  prefs: []
  type: TYPE_NORMAL
  zh: play="handlePlayCard" />
- en: '[PRE150]'
  id: totrans-935
  prefs: []
  type: TYPE_PRE
  zh: '[PRE150]'
- en: <transition-group name="card" tag="div" class="cards" @after-
  id: totrans-936
  prefs: []
  type: TYPE_NORMAL
  zh: <transition-group name="card" tag="div" class="cards" @after-
- en: leave="handleLeaveTransitionEnd">
  id: totrans-937
  prefs: []
  type: TYPE_NORMAL
  zh: leave="handleLeaveTransitionEnd">
- en: '[PRE151]'
  id: totrans-938
  prefs: []
  type: TYPE_PRE
  zh: '[PRE151]'
- en: 'methods: {'
  id: totrans-939
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: // ...
  id: totrans-940
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: handleLeaveTransitionEnd () {
  id: totrans-941
  prefs: []
  type: TYPE_NORMAL
  zh: handleLeaveTransitionEnd () {
- en: this.$emit('card-leave-end')
  id: totrans-942
  prefs: []
  type: TYPE_NORMAL
  zh: this.$emit('card-leave-end')
- en: '},'
  id: totrans-943
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-944
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE152]'
  id: totrans-945
  prefs: []
  type: TYPE_PRE
  zh: '[PRE152]'
- en: <hand v-if="!activeOverlay" :cards="currentHand" @card-
  id: totrans-946
  prefs: []
  type: TYPE_NORMAL
  zh: <hand v-if="!activeOverlay" :cards="currentHand" @card-
- en: play="handlePlayCard" @card-leave-end="handleCardLeaveEnd" />
  id: totrans-947
  prefs: []
  type: TYPE_NORMAL
  zh: play="handlePlayCard" @card-leave-end="handleCardLeaveEnd" />
- en: '[PRE153]'
  id: totrans-948
  prefs: []
  type: TYPE_PRE
  zh: '[PRE153]'
- en: 'methods: {'
  id: totrans-949
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: // ...
  id: totrans-950
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: handleCardLeaveEnd () {
  id: totrans-951
  prefs: []
  type: TYPE_NORMAL
  zh: handleCardLeaveEnd () {
- en: console.log('card leave end')
  id: totrans-952
  prefs: []
  type: TYPE_NORMAL
  zh: console.log('card leave end')
- en: '},'
  id: totrans-953
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-954
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE154]'
  id: totrans-955
  prefs: []
  type: TYPE_PRE
  zh: '[PRE154]'
- en: function applyCard () {
  id: totrans-956
  prefs: []
  type: TYPE_NORMAL
  zh: function applyCard () {
- en: const card = currentPlayingCard
  id: totrans-957
  prefs: []
  type: TYPE_NORMAL
  zh: const card = currentPlayingCard
- en: applyCardEffect(card)
  id: totrans-958
  prefs: []
  type: TYPE_NORMAL
  zh: applyCardEffect(card)
- en: '}'
  id: totrans-959
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE155]'
  id: totrans-960
  prefs: []
  type: TYPE_PRE
  zh: '[PRE155]'
- en: // Wait a bit for the player to see what's going on
  id: totrans-961
  prefs: []
  type: TYPE_NORMAL
  zh: // 等待一会儿让玩家看看发生了什么
- en: setTimeout(() => {
  id: totrans-962
  prefs: []
  type: TYPE_NORMAL
  zh: setTimeout(() => {
- en: // Check if the players are dead
  id: totrans-963
  prefs: []
  type: TYPE_NORMAL
  zh: // Check if the players are dead
- en: state.players.forEach(checkPlayerLost)
  id: totrans-964
  prefs: []
  type: TYPE_NORMAL
  zh: state.players.forEach(checkPlayerLost)
- en: if (isOnePlayerDead()) {
  id: totrans-965
  prefs: []
  type: TYPE_NORMAL
  zh: if (isOnePlayerDead()) {
- en: endGame()
  id: totrans-966
  prefs: []
  type: TYPE_NORMAL
  zh: endGame()
- en: '} else {'
  id: totrans-967
  prefs: []
  type: TYPE_NORMAL
  zh: '} else {'
- en: nextTurn()
  id: totrans-968
  prefs: []
  type: TYPE_NORMAL
  zh: nextTurn()
- en: '}'
  id: totrans-969
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}, 700)'
  id: totrans-970
  prefs: []
  type: TYPE_NORMAL
  zh: '}, 700)'
- en: '[PRE156]'
  id: totrans-971
  prefs: []
  type: TYPE_PRE
  zh: '[PRE156]'
- en: function nextTurn () {
  id: totrans-972
  prefs: []
  type: TYPE_NORMAL
  zh: function nextTurn () {
- en: // TODO
  id: totrans-973
  prefs: []
  type: TYPE_NORMAL
  zh: // TODO
- en: '}'
  id: totrans-974
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: function endGame () {
  id: totrans-975
  prefs: []
  type: TYPE_NORMAL
  zh: function endGame () {
- en: // TODO
  id: totrans-976
  prefs: []
  type: TYPE_NORMAL
  zh: // TODO
- en: '}'
  id: totrans-977
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE157]'
  id: totrans-978
  prefs: []
  type: TYPE_PRE
  zh: '[PRE157]'
- en: 'methods: {'
  id: totrans-979
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: // ...
  id: totrans-980
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: handleCardLeaveEnd () {
  id: totrans-981
  prefs: []
  type: TYPE_NORMAL
  zh: handleCardLeaveEnd () {
- en: applyCard()
  id: totrans-982
  prefs: []
  type: TYPE_NORMAL
  zh: applyCard()
- en: '},'
  id: totrans-983
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-984
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE158]'
  id: totrans-985
  prefs: []
  type: TYPE_PRE
  zh: '[PRE158]'
- en: function nextTurn () {
  id: totrans-986
  prefs: []
  type: TYPE_NORMAL
  zh: function nextTurn () {
- en: state.turn ++
  id: totrans-987
  prefs: []
  type: TYPE_NORMAL
  zh: state.turn ++
- en: state.currentPlayerIndex = state.currentOpponentId
  id: totrans-988
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayerIndex = state.currentOpponentId
- en: state.activeOverlay = 'player-turn'
  id: totrans-989
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = 'player-turn'
- en: '}'
  id: totrans-990
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE159]'
  id: totrans-991
  prefs: []
  type: TYPE_PRE
  zh: '[PRE159]'
- en: function newTurn () {
  id: totrans-992
  prefs: []
  type: TYPE_NORMAL
  zh: function newTurn () {
- en: state.activeOverlay = null
  id: totrans-993
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = null
- en: if (state.currentPlayer.skipTurn) {
  id: totrans-994
  prefs: []
  type: TYPE_NORMAL
  zh: if (state.currentPlayer.skipTurn) {
- en: skipTurn()
  id: totrans-995
  prefs: []
  type: TYPE_NORMAL
  zh: skipTurn()
- en: '} else {'
  id: totrans-996
  prefs: []
  type: TYPE_NORMAL
  zh: '} else {'
- en: startTurn()
  id: totrans-997
  prefs: []
  type: TYPE_NORMAL
  zh: startTurn()
- en: '}'
  id: totrans-998
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}'
  id: totrans-999
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE160]'
  id: totrans-1000
  prefs: []
  type: TYPE_PRE
  zh: '[PRE160]'
- en: function skipTurn () {
  id: totrans-1001
  prefs: []
  type: TYPE_NORMAL
  zh: function skipTurn () {
- en: state.currentPlayer.skippedTurn = true
  id: totrans-1002
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayer.skippedTurn = true
- en: state.currentPlayer.skipTurn = false
  id: totrans-1003
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayer.skipTurn = false
- en: nextTurn()
  id: totrans-1004
  prefs: []
  type: TYPE_NORMAL
  zh: nextTurn()
- en: '}'
  id: totrans-1005
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE161]'
  id: totrans-1006
  prefs: []
  type: TYPE_PRE
  zh: '[PRE161]'
- en: function startTurn () {
  id: totrans-1007
  prefs: []
  type: TYPE_NORMAL
  zh: function startTurn () {
- en: state.currentPlayer.skippedTurn = false
  id: totrans-1008
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayer.skippedTurn = false
- en: // If both player already had a first turn
  id: totrans-1009
  prefs: []
  type: TYPE_NORMAL
  zh: // If both player already had a first turn
- en: if (state.turn > 2) {
  id: totrans-1010
  prefs: []
  type: TYPE_NORMAL
  zh: if (state.turn > 2) {
- en: // Draw new card
  id: totrans-1011
  prefs: []
  type: TYPE_NORMAL
  zh: // Draw new card
- en: setTimeout(() => {
  id: totrans-1012
  prefs: []
  type: TYPE_NORMAL
  zh: setTimeout(() => {
- en: state.currentPlayer.hand.push(drawCard())
  id: totrans-1013
  prefs: []
  type: TYPE_NORMAL
  zh: state.currentPlayer.hand.push(drawCard())
- en: state.canPlay = true
  id: totrans-1014
  prefs: []
  type: TYPE_NORMAL
  zh: state.canPlay = true
- en: '}, 800)'
  id: totrans-1015
  prefs: []
  type: TYPE_NORMAL
  zh: '}, 800)'
- en: '} else {'
  id: totrans-1016
  prefs: []
  type: TYPE_NORMAL
  zh: '} else {'
- en: state.canPlay = true
  id: totrans-1017
  prefs: []
  type: TYPE_NORMAL
  zh: state.canPlay = true
- en: '}'
  id: totrans-1018
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '}'
  id: totrans-1019
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE162]'
  id: totrans-1020
  prefs: []
  type: TYPE_PRE
  zh: '[PRE162]'
- en: var overlayCloseHandlers = {
  id: totrans-1021
  prefs: []
  type: TYPE_NORMAL
  zh: var overlayCloseHandlers = {
- en: '''player-turn'' () {'
  id: totrans-1022
  prefs: []
  type: TYPE_NORMAL
  zh: '''player-turn'' () {'
- en: if (state.turn > 1) {
  id: totrans-1023
  prefs: []
  type: TYPE_NORMAL
  zh: if (state.turn > 1) {
- en: state.activeOverlay = 'last-play'
  id: totrans-1024
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = 'last-play'
- en: '} else {'
  id: totrans-1025
  prefs: []
  type: TYPE_NORMAL
  zh: '} else {'
- en: newTurn()
  id: totrans-1026
  prefs: []
  type: TYPE_NORMAL
  zh: newTurn()
- en: '}'
  id: totrans-1027
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '},'
  id: totrans-1028
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '''last-play'' () {'
  id: totrans-1029
  prefs: []
  type: TYPE_NORMAL
  zh: '''last-play'' () {'
- en: newTurn()
  id: totrans-1030
  prefs: []
  type: TYPE_NORMAL
  zh: newTurn()
- en: '},'
  id: totrans-1031
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '''game-over'' () {'
  id: totrans-1032
  prefs: []
  type: TYPE_NORMAL
  zh: '''game-over'' () {'
- en: // Reload the game
  id: totrans-1033
  prefs: []
  type: TYPE_NORMAL
  zh: // Reload the game
- en: document.location.reload()
  id: totrans-1034
  prefs: []
  type: TYPE_NORMAL
  zh: document.location.reload()
- en: '},'
  id: totrans-1035
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '}'
  id: totrans-1036
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE163]'
  id: totrans-1037
  prefs: []
  type: TYPE_PRE
  zh: '[PRE163]'
- en: 'methods: {'
  id: totrans-1038
  prefs: []
  type: TYPE_NORMAL
  zh: 'methods: {'
- en: // ...
  id: totrans-1039
  prefs: []
  type: TYPE_NORMAL
  zh: // ...
- en: handleOverlayClose () {
  id: totrans-1040
  prefs: []
  type: TYPE_NORMAL
  zh: handleOverlayClose () {
- en: overlayCloseHandlers[this.activeOverlay]()
  id: totrans-1041
  prefs: []
  type: TYPE_NORMAL
  zh: overlayCloseHandlers[this.activeOverlay]()
- en: '},'
  id: totrans-1042
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '},'
  id: totrans-1043
  prefs: []
  type: TYPE_NORMAL
  zh: '},'
- en: '[PRE164]'
  id: totrans-1044
  prefs: []
  type: TYPE_PRE
  zh: '[PRE164]'
- en: <overlay v-if="activeOverlay" :key="activeOverlay"
  id: totrans-1045
  prefs: []
  type: TYPE_NORMAL
  zh: <overlay v-if="activeOverlay" :key="activeOverlay"
- en: '@close="handleOverlayClose">'
  id: totrans-1046
  prefs: []
  type: TYPE_NORMAL
  zh: '@close="handleOverlayClose">'
- en: '[PRE165]'
  id: totrans-1047
  prefs: []
  type: TYPE_PRE
  zh: '[PRE165]'
- en: function endGame () {
  id: totrans-1048
  prefs: []
  type: TYPE_NORMAL
  zh: function endGame () {
- en: state.activeOverlay = 'game-over'
  id: totrans-1049
  prefs: []
  type: TYPE_NORMAL
  zh: state.activeOverlay = 'game-over'
- en: '}'
  id: totrans-1050
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '```'
  id: totrans-1051
  prefs: []
  type: TYPE_NORMAL
  zh: '```'
- en: This will display the `game-over` overlay if at least one player is dead.
  id: totrans-1052
  prefs: []
  type: TYPE_NORMAL
  zh: 如果至少有一个玩家死亡，这将显示“game-over”叠加层。
- en: Summary
  id: totrans-1053
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Summary
- en: Our card game is finished. We saw a lot of new features provided by Vue that
    enable us to create rich and interactive experiences easily. However, the one
    most important thing we introduced and used in this chapter is the component-based
    approach to web application development. This helps us develop larger applications
    by splitting our frontend logic into small, isolated, and reusable components.
    We covered how to make components communicate with each other, from parent to
    children with props and from child to parent with custom events. We also added
    animations and transitions (with the `<transition>` and `<transition-group>` special
    components) to the game to make it more alive. We even manipulated SVG inside
    our templates and dynamically displayed a component with the special `<component>`
    component.
  id: totrans-1054
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的纸牌游戏结束了。我们看到了Vue提供的许多新功能，使我们能够轻松创建丰富和交互式的体验。然而，在本章中介绍和使用的最重要的一点是基于组件的Web应用程序开发方法。这有助于我们通过将前端逻辑拆分为小型、隔离和可重用的组件来开发更大的应用程序。我们介绍了如何使组件彼此通信，从父组件到子组件使用props，从子组件到父组件使用自定义事件。我们还为游戏添加了动画和过渡（使用`<transition>`和`<transition-group>`特殊组件），使其更加生动。我们甚至在模板中操纵了SVG，并使用特殊的`<component>`组件动态显示了一个组件。
- en: In the next chapter, we will set up a more advanced application with Vue component
    files, among other features that will help us build even larger applications.
  id: totrans-1055
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将使用Vue组件文件等其他功能来设置一个更高级的应用程序，这些功能将帮助我们构建更大的应用程序。
